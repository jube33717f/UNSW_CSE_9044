<!DOCTYPE html>
<!-- saved from url=(0057)https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/06/questions -->
<html lang="en" class="gr__cgi_cse_unsw_edu_au"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<title>

COMP2041 Week 06 Laboratory Exercises

</title>
<!-- <link href="/~cs2041/19T2/flask.cgi/static/bootstrap.min.css" rel="stylesheet"> -->
<link crossorigin="anonymous" href="./COMP2041 Week 06 Laboratory Exercises_files/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rel="stylesheet">
<link href="./COMP2041 Week 06 Laboratory Exercises_files/course.css" rel="stylesheet">
<!-- <script type="text/javascript" src="/~cs2041/19T2/flask.cgi/static/jquery.min.js"></script> -->
<!-- <script type="text/javascript" src="/~cs2041/19T2/flask.cgi/static/bootstrap.min.js"></script> -->
<script src="./COMP2041 Week 06 Laboratory Exercises_files/jquery-3.3.1.min.js"></script>
<script src="./COMP2041 Week 06 Laboratory Exercises_files/popper.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" src="./COMP2041 Week 06 Laboratory Exercises_files/bootstrap.min.js"></script>
<script src="./COMP2041 Week 06 Laboratory Exercises_files/course.js" type="text/javascript"></script>
<!-- prism code-highligting -->
<link href="./COMP2041 Week 06 Laboratory Exercises_files/prism.css" rel="stylesheet">
<!-- defer loading of prism.js script until DOM is loaded, as per PR #26 and https://stackoverflow.com/a/24070373 -->
<script defer="" src="./COMP2041 Week 06 Laboratory Exercises_files/prism.js" type="text/javascript"></script>
<script async="" src="./COMP2041 Week 06 Laboratory Exercises_files/ei.js"></script>
<link href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/" rel="canonical">
</head>
<body class="container" data-gr-c-s-loaded="true">
<div class="row" id="heading">
<div class="col-3 text-left">
<a class="heading_link" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/" id="left_heading_link" target="_blank">COMP(2041|9044) 19T2</a>
</div>
<div class="col-6 text-center">
<span class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="btn btn-lg btn-link dropdown-toggle heading_button" data-toggle="dropdown" id="week-selector" type="button">
        Week 06 <span class="caret"></span>
</button>
<div aria-labelledby="week-selector" class="dropdown-menu">
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/01/questions">Week 01</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/02/questions">Week 02</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/03/questions">Week 03</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/04/questions">Week 04</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/05/questions">Week 05</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/06/questions">Week 06</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/07/questions">Week 07</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/08/questions">Week 08</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/09/questions">Week 09</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/10/questions">Week 10</a>
</div>
</span>
<span class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="btn btn-lg btn-link dropdown-toggle heading_button" data-toggle="dropdown" id="tlb-selector" type="button">
        Laboratory <span class="caret"></span>
</button>
<div aria-labelledby="tlb-selector" class="dropdown-menu">
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/tut/06/questions">Tutorial</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/06/questions">Laboratory</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/test/06/questions">Weekly Test</a>
</div>
</span>
<span class="dropdown">
<button aria-expanded="false" aria-haspopup="true" class="btn btn-lg btn-link dropdown-toggle heading_button" data-toggle="dropdown" id="qa-selector" type="button">
        Exercises <span class="caret"></span>
</button>
<div aria-labelledby="qa-selector" class="dropdown-menu">
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/06/questions">Exercises</a>
<a class="dropdown-item" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/lab/06/answers">Sample Solutions</a>
</div>
</span>
</div>
<div class="col-3 text-right">
<a class="heading_link" href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/" id="right_heading_link" target="_blank">COMP(2041|9044) 19T2</a>
</div>
</div>
<div class="tutlab lab">
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Objectives
            </h3>
</div>
<div class="card-body">
<ul>
<li>Proficiency at text processing in Perl.</li>
<li>Understanding multi-dimensional hashes.</li>
<li>Explore a simple machine learning algorithm.</li>
</ul>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Preparation
            </h3>
</div>
<div class="card-body">

Before the lab you should re-read the relevant lecture slides and their accompanying examples.


</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Getting Started
            </h3>
</div>
<div class="card-body">



Create a new directory for this lab called <code>lab06</code> and change to this directory with these comamnds:

<pre class="command_line"><kbd class="shell">mkdir lab06</kbd>
<kbd class="shell">cd lab06</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Exercise: How many words in standard input?
            </h3>
</div>
<div class="card-body">











In these exercises you will work with a dataset containing sing lyrics.
<p>
This <a href="https://cgi.cse.unsw.edu.au/~cs2041/19T2//activities/total_words/lyrics.zip">zip file</a> contains
the lyrics of the songs of 10 well known artists.

</p><pre class="command_line"><kbd class="shell">wget -q https://cgi.cse.unsw.edu.au/~cs2041/19T2//activities/total_words/lyrics.zip</kbd>
<kbd class="shell">unzip lyrics.zip</kbd>
Archive:  lyrics.zip
   creating: lyrics/
  inflating: lyrics/David_Bowie.txt
  inflating: lyrics/Adele.txt
  inflating: lyrics/Metallica.txt
  inflating: lyrics/Rage_Against_The_Machine.txt
  inflating: lyrics/Taylor_Swift.txt
  inflating: lyrics/Keith_Urban.txt
  inflating: lyrics/Ed_Sheeran.txt
  inflating: lyrics/Justin_Bieber.txt
  inflating: lyrics/Rihanna.txt
  inflating: lyrics/Leonard_Cohen.txt
  inflating: song0.txt
  inflating: song1.txt
  inflating: song2.txt
  inflating: song3.txt
  inflating: song4.txt
</pre>

The lyrics for each song have been re-ordered to avoid copyright concerns.
<p>
The zip file also contains lyrics from 5 songs where we don't know the artists.


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">cat song0.txt</kbd>
I've made up my mind,  Don't need to think it over,  
If I'm wrong I am right,  
Don't need to look no further,  
This ain't lust,  
I know this is love but,  
  
If I tell the world,  
I'll never say enough,  
Cause it was not said to you,  
And that's exactly what I need to do,  
If I'm in love with you,  
<kbd class="shell">cat song1.txt</kbd>
Come Mr. DJ song pon de replay  
Come Mr. DJ won't you turn the music up  
All the gal pon the dance floor wantin' some more what  
Come Mr. DJ won't you turn the music up  
<kbd class="shell">cat song2.txt</kbd>
And they say  
She's in the class A team  
Stuck in her daydream  
Been this way since eighteen  
But lately her face seems  
Slowly sinking, wasting  
Crumbling like pastries  
<kbd class="shell">cat song3.txt</kbd>
Ooh whoa, ooh whoa, ooh whoa  You know you love me, you know you care  
Just shout whenever and I'll be there  
You are my love, you are my heart  
And we will never, ever, ever be apart  
  
Are we an item? Girl quit playin'  
We're just friends, what are you sayin'  
Said there's another, look right in my eyes  
My first love, broke my heart for the first time  
  
And I was like baby, baby, baby oh  
Like baby, baby, baby no  
Like baby, baby, baby oh  
I thought you'd always be mine (Mine)  
Baby, baby, baby oh  
Like baby, baby, baby no  
Like baby, baby, baby ooh  
I thought you'd always be mine  
  
Oh for you, I would have done whatever  
And I just can't believe we ain't together  
And I wanna play it cool  
But I'm losin' you  
I'll buy you anything  
I'll buy you any ring  
And I'm in pieces, baby fix me  
And just shake me, til you wake me from this bad dream  
I'm goin' down, down, down, down  
And I can't believe my first love won't be around  
<kbd class="shell">cat song4.txt</kbd>
The birds they sang  At the break of day  
Start again  
I heard them say  
Don't dwell on what  
Has passed away  
Or what is yet to be.  
Ah the wars they will  
Be fought again  
The holy dove  
She will be caught again  
Bought and sold  
And bought again  
The dove is never free.  
  
Ring the bells that still can ring  
Forget your perfect offering  
There is a crack in everything  
That's how the light gets in.  
</pre>

They are each from one of the artists in the dataset but they are not from
a song in the dataset.

<p>
To start on this analysis write a Perl script <code>total_words.pl</code> which counts the total number of words
found in its input (<code>STDIN</code>).
</p><p>
For the purposes of this program and the following programs we will define a word to
be maximal non-empty contiguous sequences of alphabetic characters (<code>[a-zA-Z]</code>).
</p><p>
Any characters other than <code>[a-zA-Z]</code> separate words.
</p><p>
So for example the phrase "<code>The soul's desire</code>" contains 4 words: <code>("The", "soul", "s", "desire")</code>
</p><p>
For example:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./total_words.pl &lt;lyrics/Justin_Bieber.txt</kbd>
46589 words
<kbd class="shell">./total_words.pl &lt;lyrics/Metallica.txt</kbd>
38096 words
<kbd class="shell">./total_words.pl &lt;lyrics/Rihanna.txt</kbd>
53157 words
</pre>
<b>Hint</b>: if your word counts are out a little you might be counting empty strings (split can return these).
As usual:













<p>
When you think your program is working you can use <code>autotest</code> to run some simple automated tests:

</p><pre class="command_line"><kbd class="shell">2041 autotest total_words</kbd>
</pre>
<div class="autotest_results">
<h4>Autotest Results</h4>
<span class="autotest_results_emphasis">96%</span>
        
        of <span class="autotest_results_emphasis">468</span> students
        
            who have autotested
            <span class="autotest_results_emphasis">total_words.pl</span>
            so far,
        
        
            passed all autotest tests.
            
                <div class="autotest_results_individual">
<ul>
<li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>0</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>1</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>2</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>3</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>4</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>5</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>6</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>7</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>8</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>9</i>
</li></ul>
</div>
</div>




    When you are finished working on this exercise you must submit
    your work by running <b>give</b>:



<pre class="command_line"><kbd class="shell">give cs2041 lab06_total_words total_words.pl</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Exercise: How many times does a word occur in standard input
            </h3>
</div>
<div class="card-body">












Write a Perl script <code>count_word.pl</code> which counts the number of times
a specified word is found in its input (<code>STDIN</code>).
<p>
A word is as defined for the previous exercise.
</p><p>
The word you should count will be specified as a command line argument.
</p><p>
Your: program should ignore the case of words.
</p><p>
For example:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./count_word.pl death &lt;lyrics/Metallica.txt</kbd>
death occurred 69 times
<kbd class="shell">./count_word.pl death &lt;lyrics/Justin_Bieber.txt</kbd>
death occurred 0 times
<kbd class="shell">./count_word.pl love &lt;lyrics/Ed_Sheeran.txt</kbd>
love occurred 218 times
<kbd class="shell">./count_word.pl love &lt;lyrics/Rage_Against_The_Machine.txt</kbd>
love occurred 4 times
</pre>
<b>Hint</b>: modify the code from the last exercise.
<p>
<b>Hint</b>: the Perl functions <code>uc</code> &amp; <code>lc</code> convert strings to lowercase &amp; uppercase respectively.
</p><p>
</p><p>
When you think your program is working you can use <code>autotest</code> to run some simple automated tests:

</p><pre class="command_line"><kbd class="shell">2041 autotest count_word</kbd>
</pre>
<div class="autotest_results">
<h4>Autotest Results</h4>
<span class="autotest_results_emphasis">98%</span>
        
        of <span class="autotest_results_emphasis">457</span> students
        
            who have autotested
            <span class="autotest_results_emphasis">count_word.pl</span>
            so far,
        
        
            passed all autotest tests.
            
                <div class="autotest_results_individual">
<ul>
<li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>0</i>
</li><li><span class="autotest_results_emphasis">98%</span>
                    
                    passed test <i>1</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>2</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>3</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>4</i>
</li><li><span class="autotest_results_emphasis">98%</span>
                    
                    passed test <i>5</i>
</li><li><span class="autotest_results_emphasis">98%</span>
                    
                    passed test <i>6</i>
</li><li><span class="autotest_results_emphasis">98%</span>
                    
                    passed test <i>7</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>8</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>9</i>
</li></ul>
</div>
</div>




    When you are finished working on this exercise you must submit
    your work by running <b>give</b>:



<pre class="command_line"><kbd class="shell">give cs2041 lab06_count_word count_word.pl</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Exercise: Do you use that word often?
            </h3>
</div>
<div class="card-body">












Write a Perl script <code>frequency.pl</code>
which prints the frequency with which each artist uses a  word specified as an argument.
<p>
So if Justin Bieber  uses the word <b>"love"</b> 493 times in the 46583 words of his songs, then its frequency is <code>493/46583 = 0.0105832599875491</code>.
</p><p>
For example:



    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./frequency.pl love</kbd>
 165/ 16359 = 0.010086191 Adele
 189/ 34080 = 0.005545775 David Bowie
 218/ 18207 = 0.011973417 Ed Sheeran
 493/ 46589 = 0.010581897 Justin Bieber
 217/ 27016 = 0.008032277 Keith Urban
 212/ 26192 = 0.008094075 Leonard Cohen
  57/ 38096 = 0.001496220 Metallica
   4/ 18985 = 0.000210693 Rage Against The Machine
 494/ 53157 = 0.009293226 Rihanna
  89/ 26188 = 0.003398503 Taylor Swift
</pre>

So of these artists, Ed Sheeran uses the word <b>"love"</b> most frequently.
If you choose a word a randomly from an Ed Sheeran song the probability it will be "love"
is just over in 1 in a hundred (1%).
<p>
Make sure your Perl script produces exactly the output above (the printf format is <code>"%4d/%6d = %.9f %s\n"</code>).
</p><p>
Note you should ignore case (change A-Z to a-z).
</p><p>
You should treat as a word any sequence of alphabetic characters.
</p><p>
You should treat non-alphabetic characters (characters other than a-z) as spaces.
</p><p>
<b>Hint</b>: use a hash table of hash tables indexed by artist and word to store the word counts.
</p><p>
<b>Hint</b>: this loop executes once for each <code>.txt</code> file in the directory <code>lyrics</code>.
</p><pre class="program">    foreach $file (glob "lyrics/*.txt") {
        print "$file\n";
    }
</pre>
<p>
<b>Hint</b>: reuse code from the last exercise.








</p><p>
When you think your program is working you can use <code>autotest</code> to run some simple automated tests:

</p><pre class="command_line"><kbd class="shell">2041 autotest frequency</kbd>
</pre>
<div class="autotest_results">
<h4>Autotest Results</h4>
<span class="autotest_results_emphasis">96%</span>
        
        of <span class="autotest_results_emphasis">427</span> students
        
            who have autotested
            <span class="autotest_results_emphasis">frequency.pl</span>
            so far,
        
        
            passed all autotest tests.
            
                <div class="autotest_results_individual">
<ul>
<li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>0</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>1</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>2</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>3</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>4</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>5</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>6</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>8</i>
</li><li><span class="autotest_results_emphasis">96%</span>
                    
                    passed test <i>9</i>
</li></ul>
</div>
</div>




    When you are finished working on this exercise you must submit
    your work by running <b>give</b>:



<pre class="command_line"><kbd class="shell">give cs2041 lab06_frequency frequency.pl</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Exercise: When numbers get very small, logarithms are your friend
            </h3>
</div>
<div class="card-body">












Now suppose we have the song line <b>"truth is beauty"</b>. Given that David Bowie uses the
word <b>"truth"</b> with frequency 0.000146727 and the
word <b>"is"</b> with frequency 0.005898407, the word <b>"beauty"</b> with frequency 0.000264108; we can estimate the probability of Bowie writing the phrase <b>"truth is beauty"</b>
as:

<pre class="program">0.000146727 * 0.005898407 * 0.000264108 = 2.28573738067596e-10
</pre>

We could similarly estimate probabilities for each of the other 9 artists, and
then determine which of the 10 artists is most likely to sing <b>"truth is beauty"</b> (it's Leonard Cohen).
<p>
A sidenote: we are actually making a large simplifying assumption in calculating this probability. It is
often  called the <a href="http://en.wikipedia.org/wiki/Bag_of_words_model"><b>bag of words model</b></a>.
</p><p>
Multiplying probabilities like this quickly leads to very small numbers and may result in
arithmetic underflow of our floating point representation.
A common solution to this underflow is instead to  work with the <b>log</b> of the numbers.
</p><p>
So instead we will calculate the the log of the probability of the phrase.
You do this by adding the log of the probabilities of each word. For example,
you calculate the log-probability of Bowie singing the phrase <b>"Truth is beauty."</b> like this:

</p><pre class="program">log(0.000146727) + log(0.005898407) + log(0.000264108) = -22.1991622527613 = log(2.28573738067596e-10)
</pre>

Log-probabilities can be used directly to determine the most likely artist, as the artist
with the highest log-probability will also have the highest probability.
<p>
Another problem is that we might be given a word that an artist has not used in the dataset we
have.  For example:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./frequency.pl fear</kbd>
   2/ 16359 = 0.000122257 Adele
  13/ 34080 = 0.000381455 David Bowie
   0/ 18207 = 0.000000000 Ed Sheeran
  10/ 46589 = 0.000214643 Justin Bieber
   0/ 27016 = 0.000000000 Keith Urban
   4/ 26192 = 0.000152718 Leonard Cohen
  39/ 38096 = 0.001023730 Metallica
  26/ 18985 = 0.001369502 Rage Against The Machine
   3/ 53157 = 0.000056437 Rihanna
   3/ 26188 = 0.000114556 Taylor Swift
</pre>

It is not useful to assume there is zero probability that <b>Ed Sheeran</b> would use the word <b>fear</b>
in a song even though he hasn't used it previously.
<p>
You should avoid this when estimating probabilities by adding 1 to the count of occurrences
of each word. So for example we'd estimate the probability of Ed Sheeran using the word
<b>fear</b> as (0+1)/18205 and the probability of Metallica using the word
<b>fear</b> as (39+1)/38082.
This is a simple version of <a href="http://en.wikipedia.org/wiki/Additive_smoothing">Additive smoothing</a>.
</p><p>
Write a perl script <code>log_probability.pl</code> which given an argument prints the estimate
log of the probability that an artist would use this word. For example:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./log_probability.pl fear</kbd>
log((2+1)/ 16359) =  -8.6039 Adele
log((13+1)/ 34080) =  -7.7974 David Bowie
log((0+1)/ 18207) =  -9.8096 Ed Sheeran
log((10+1)/ 46589) =  -8.3512 Justin Bieber
log((0+1)/ 27016) = -10.2042 Keith Urban
log((4+1)/ 26192) =  -8.5638 Leonard Cohen
log((39+1)/ 38096) =  -6.8590 Metallica
log((26+1)/ 18985) =  -6.5556 Rage Against The Machine
log((3+1)/ 53157) =  -9.4947 Rihanna
log((3+1)/ 26188) =  -8.7868 Taylor Swift
</pre>

You will only need to copy your <code>frequency.pl</code> and make a small modification.
Make sure your output matches the above exactly (the printf format is <code>"log((%d+1)/%6d) = %8.4f %s\n"</code>)








<p>
When you think your program is working you can use <code>autotest</code> to run some simple automated tests:

</p><pre class="command_line"><kbd class="shell">2041 autotest log_probability</kbd>
</pre>
<div class="autotest_results">
<h4>Autotest Results</h4>
<span class="autotest_results_emphasis">98%</span>
        
        of <span class="autotest_results_emphasis">406</span> students
        
            who have autotested
            <span class="autotest_results_emphasis">log_probability.pl</span>
            so far,
        
        
            passed all autotest tests.
            
                <div class="autotest_results_individual">
<ul>
<li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_0</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_1</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_2</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_3</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_4</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_5</i>
</li><li><span class="autotest_results_emphasis">99%</span>
                    
                    passed test <i>probability_6</i>
</li></ul>
</div>
</div>




    When you are finished working on this exercise you must submit
    your work by running <b>give</b>:



<pre class="command_line"><kbd class="shell">give cs2041 lab06_log_probability log_probability.pl</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Exercise: Who sang those words?
            </h3>
</div>
<div class="card-body">












Write a Perl script <code>identify_artist.pl</code> that given 1 or more files, each containing   part of song),
prints the most likely artist to have sung those words.
<p>
In other words, for each file given as argument you should go through all (10) artists calculating
the log-probability that the artist sung those words  by summing the
log-probability of that artist using each word in the file.
You should print the artist with the highest log-probability.
</p><p>
Your program should produce exactly this output:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./identify_artist.pl song?.txt</kbd>
song0.txt most resembles the work of Adele (log-probability=-352.4)
song1.txt most resembles the work of Rihanna (log-probability=-254.9)
song2.txt most resembles the work of Ed Sheeran (log-probability=-206.6)
song3.txt most resembles the work of Justin Bieber (log-probability=-1089.8)
song4.txt most resembles the work of Leonard Cohen (log-probability=-493.8)
</pre>
<b>Hint:</b> only read each file once.  Store the data in a (2-dimensional) hash.
If you read the files many times your program will be very slow and exceed autotest time limits.

<p>
You may find it helpful to add a '-d' flag which provides debugging information (this is optional),
for example:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./identify_artist.pl -d song2.txt</kbd>
song2.txt: log_probability of -206.6 for Ed Sheeran
song2.txt: log_probability of -210.8 for Adele
song2.txt: log_probability of -211.5 for Taylor Swift
song2.txt: log_probability of -211.7 for Keith Urban
song2.txt: log_probability of -215.0 for Leonard Cohen
song2.txt: log_probability of -215.4 for Rage Against The Machine
song2.txt: log_probability of -215.7 for David Bowie
song2.txt: log_probability of -217.2 for Justin Bieber
song2.txt: log_probability of -222.2 for Metallica
song2.txt: log_probability of -223.4 for Rihanna
song2.txt most resembles the work of Ed Sheeran (log-probability=-206.6)
</pre>
<b>Hint:</b> you may like to create simpler input to use in debugging, for example:

<pre class="command_line"><kbd class="shell">echo Andrew Rocks &gt;andrew_rocks.txt</kbd>
</pre>
<pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./log_probability.pl Andrew</kbd>
log((0+1)/ 16359) =  -9.7025 Adele
log((0+1)/ 34080) = -10.4365 David Bowie
log((0+1)/ 18207) =  -9.8096 Ed Sheeran
log((0+1)/ 46589) = -10.7491 Justin Bieber
log((0+1)/ 27016) = -10.2042 Keith Urban
log((0+1)/ 26192) = -10.1732 Leonard Cohen
log((0+1)/ 38096) = -10.5479 Metallica
log((0+1)/ 18985) =  -9.8514 Rage Against The Machine
log((0+1)/ 53157) = -10.8810 Rihanna
log((0+1)/ 26188) = -10.1731 Taylor Swift
<kbd class="shell">./log_probability.pl Rocks</kbd>
log((0+1)/ 16359) =  -9.7025 Adele
log((10+1)/ 34080) =  -8.0386 David Bowie
log((0+1)/ 18207) =  -9.8096 Ed Sheeran
log((1+1)/ 46589) = -10.0560 Justin Bieber
log((0+1)/ 27016) = -10.2042 Keith Urban
log((0+1)/ 26192) = -10.1732 Leonard Cohen
log((1+1)/ 38096) =  -9.8547 Metallica
log((0+1)/ 18985) =  -9.8514 Rage Against The Machine
log((2+1)/ 53157) =  -9.7824 Rihanna
log((6+1)/ 26188) =  -8.2271 Taylor Swift
<kbd class="shell">./identify_artist.pl -d andrew_rocks.txt</kbd>
andrew_rocks.txt: log_probability of -18.4 for Taylor Swift
andrew_rocks.txt: log_probability of -18.5 for David Bowie
andrew_rocks.txt: log_probability of -19.4 for Adele
andrew_rocks.txt: log_probability of -19.6 for Ed Sheeran
andrew_rocks.txt: log_probability of -19.7 for Rage Against The Machine
andrew_rocks.txt: log_probability of -20.3 for Leonard Cohen
andrew_rocks.txt: log_probability of -20.4 for Metallica
andrew_rocks.txt: log_probability of -20.4 for Keith Urban
andrew_rocks.txt: log_probability of -20.7 for Rihanna
andrew_rocks.txt: log_probability of -20.8 for Justin Bieber
andrew_rocks.txt most resembles the work of Taylor Swift (log-probability=-18.4)
</pre>
<b>Hint:</b> if a word appears multiple times its log-probability needs to be summed multiple times.

<pre class="command_line"><kbd class="shell">echo echo echo &gt;echo.txt</kbd>
</pre>
<pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">cat echo.txt</kbd>
echo echo
<kbd class="shell">./log_probability.pl echo</kbd>
log((0+1)/ 16359) =  -9.7025 Adele
log((0+1)/ 34080) = -10.4365 David Bowie
log((0+1)/ 18207) =  -9.8096 Ed Sheeran
log((0+1)/ 46589) = -10.7491 Justin Bieber
log((0+1)/ 27016) = -10.2042 Keith Urban
log((0+1)/ 26192) = -10.1732 Leonard Cohen
log((0+1)/ 38096) = -10.5479 Metallica
log((14+1)/ 18985) =  -7.1434 Rage Against The Machine
log((0+1)/ 53157) = -10.8810 Rihanna
log((1+1)/ 26188) =  -9.4799 Taylor Swift
<kbd class="shell">./identify_artist.pl -d echo.txt</kbd>
echo.txt: log_probability of -14.3 for Rage Against The Machine
echo.txt: log_probability of -19.0 for Taylor Swift
echo.txt: log_probability of -19.4 for Adele
echo.txt: log_probability of -19.6 for Ed Sheeran
echo.txt: log_probability of -20.3 for Leonard Cohen
echo.txt: log_probability of -20.4 for Keith Urban
echo.txt: log_probability of -20.9 for David Bowie
echo.txt: log_probability of -21.1 for Metallica
echo.txt: log_probability of -21.5 for Justin Bieber
echo.txt: log_probability of -21.8 for Rihanna
echo.txt most resembles the work of Rage Against The Machine (log-probability=-14.3)
</pre>
<p>
When you think your program is working you can use <code>autotest</code> to run some simple automated tests:

</p><pre class="command_line"><kbd class="shell">2041 autotest identify_artist</kbd>
</pre>
<div class="autotest_results">
<h4>Autotest Results</h4>
<span class="autotest_results_emphasis">81%</span>
        
        of <span class="autotest_results_emphasis">322</span> students
        
            who have autotested
            <span class="autotest_results_emphasis">identify_artist.pl</span>
            so far,
        
        
            passed all autotest tests.
            
                <div class="autotest_results_individual">
<ul>
<li><span class="autotest_results_emphasis">90%</span>
                    
                    passed test <i>0</i>
</li><li><span class="autotest_results_emphasis">91%</span>
                    
                    passed test <i>1</i>
</li><li><span class="autotest_results_emphasis">91%</span>
                    
                    passed test <i>2</i>
</li><li><span class="autotest_results_emphasis">85%</span>
                    
                    passed test <i>3</i>
</li><li><span class="autotest_results_emphasis">90%</span>
                    
                    passed test <i>4</i>
</li><li><span class="autotest_results_emphasis">81%</span>
                    
                    passed test <i>all</i>
</li></ul>
</div>
</div>




    When you are finished working on this exercise you must submit
    your work by running <b>give</b>:



<pre class="command_line"><kbd class="shell">give cs2041 lab06_identify_artist identify_artist.pl</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Challenge Exercise: A Perl Program that Prints Perl that Prints Perl that ...
            </h3>
</div>
<div class="card-body">












Write a Perl program  <code>perl_print_n.pl</code>  which is given a two arguments,
an integer <b>n</b> and a string.
<p>
If <b>n</b> is 1 it should  output a Perl program which prints the string.
</p><p>
If <b>n</b> is 2 it should  output a Perl program which prints a Perl program which prints a Perl program which prints the string.
</p><p>
If <b>n</b> is 2 it should  output a Perl program which prints a Perl program which prints a Perl program which prints the string.
</p><p>
If <b>n</b> is 3 it should  output a Perl program which prints a Perl program which prints a Perl program which prints a Perl program which prints a Perl program which prints the string.
</p><p>
And so on for any value of <b>n</b>.
</p><p>
For example:


    
        
    





</p><pre class="command_line" style="max-height: 32em;overflow:  auto;"><kbd class="shell">./perl_print_n.pl 1 'Perl that prints Perl'</kbd>
print "Perl that prints Perl\n"
<kbd class="shell">./perl_print_n.pl 2 'Perl that prints Perl that Prints Perl'|perl|perl</kbd>
Perl that prints Perl that Prints Perl
<kbd class="shell">./perl_print_n.pl 2 'Perl that ....'|perl|perl</kbd>
Perl that ....
<kbd class="shell">./perl_print_n.pl 4 'Andrew Rocks!'|perl|perl|perl|perl</kbd>
Andrew Rocks!
<kbd class="shell">./perl_print_n.pl 10 'I love COMP(2041|9044)!'|perl|perl|perl|perl|perl|perl|perl|perl|perl|perl</kbd>
I love COMP(2041|9044)!
</pre>



You can assume n is a positive integer.
<p>
You can assume the string contains only ASCII characters.
</p><p>
You can not make other assumptions about the characters in the string.









</p><p>
When you think your program is working you can use <code>autotest</code> to run some simple automated tests:

</p><pre class="command_line"><kbd class="shell">2041 autotest perl_print_n</kbd>
</pre>
<div class="autotest_results">
<h4>Autotest Results</h4>
<span class="autotest_results_emphasis">73%</span>
        
        of <span class="autotest_results_emphasis">51</span> students
        
            who have autotested
            <span class="autotest_results_emphasis">perl_print_n.pl</span>
            so far,
        
        
            passed all autotest tests.
            
                <div class="autotest_results_individual">
<ul>
<li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>1</i>
</li><li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>2</i>
</li><li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>3</i>
</li><li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>4</i>
</li><li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>5</i>
</li><li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>6</i>
</li><li><span class="autotest_results_emphasis">75%</span>
                    
                    passed test <i>7</i>
</li><li><span class="autotest_results_emphasis">73%</span>
                    
                    passed test <i>8</i>
</li><li><span class="autotest_results_emphasis">73%</span>
                    
                    passed test <i>9</i>
</li></ul>
</div>
</div>




    When you are finished working on this exercise you must submit
    your work by running <b>give</b>:



<pre class="command_line"><kbd class="shell">give cs2041 lab06_perl_print_n perl_print_n.pl</kbd>
</pre>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">
                Submission
            </h3>
</div>
<div class="card-body">


When you are finished each exercises make sure you submit your work by running <b>give</b>.
<p>
You can run <b>give</b> multiple times.
Only your last submission will be marked.
</p><p>
Don't submit any exercises you haven't attempted.
</p><p>
If you are working at home, you may find it more convenient
to upload your work via
 <a href="https://cgi.cse.unsw.edu.au/~give/code/login.php?app=/~give/Student/give.php&amp;debug=get_authuser">give's web interface</a>.
</p><p>
Remember you have until

<b>Thursday 18 July 21:59:59</b>


to submit your work.
</p><p>
You cannot obtain marks by e-mailing lab work to tutors or lecturers.
</p><p>
You check the files you have submitted <a href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/student/">here</a>
</p><p>
Automarking will be run by the lecturer several days after the submission deadline
for the test, using test cases that you haven't seen:
different to the test cases <code><kbd>autotest</kbd></code> runs for
you.
</p><p>
(Hint: do your own testing as well as running
<code><kbd>autotest</kbd></code>)
</p><p>
After automarking is run by the lecturer you can
<a href="https://cgi.cse.unsw.edu.au/~cs2041/19T2/student/">view it here</a>
the resulting mark will also be available via
<a href="https://cgi.cse.unsw.edu.au/~give/Student/sturec.php">via give's web interface</a>
</p><p>
</p><h4>Lab Marks</h4>
<p>
When all components of a lab  are automarked you should be able to view the
the marks <a href="https://cgi.cse.unsw.edu.au/~give/Student/sturec.php">via give's web interface</a>
or by running this command on a CSE machine:

</p><pre class="command_line"><kbd class="shell">2041 classrun -sturec</kbd>
</pre>
<p>
The lab exercises for each week are worth in total 1.2 marks.
</p><p>
Usually each lab exercise will be worth the same - for example if there are 5 lab exercises each will be worth 0.4 marks.
</p><p>
Except challenge exercises (see below) will never total more than 20% of each week's lab mark.
</p><p>
All of your lab marks for weeks 1-10, will be summed to give you a mark out of 12.
</p><p>
If their sum exceeds 9 - your total mark will be capped at 9.

</p><h4>Running Autotests On your Own Computer</h4>

An experimental version of autotest exists which may allow you to run autotest on your own computer.
<p>
If you are running Linux,  Windows Subsystem for Linux or OSX.  These commands might let you run autotests at home.

</p><pre class="command_line"><kbd class="shell">sudo wget https://cgi.cse.unsw.edu.au/~cs2041/19T2/resources/home_autotest -O/usr/local/bin/2041_autotest</kbd>
<kbd class="shell">sudo chmod 755 /usr/local/bin/2041_autotest</kbd>
<kbd class="shell">2041_autotest shell_snapshot</kbd>
</pre>

Autotest itself needs Python 3.6 (or later) installed.
<p>
Particular autotests may require other software install, e.g.  autotests of perl programs require Perl installed (of course).
</p><p>
The legit autotests need  python3.7, git &amp; binfmt-support installed.
</p><p>
The program embeds the autotests themselves, so you'll need to re-download if autotests are changed, added, fixed, ...
</p><p>
If it breaks on your computer post on the class forum  and we'll fix if we can, but this is very definitely experimental.

</p></div>
</div>
</div>
<footer class="mt-3 container text-center no-print">
<p class="text-muted">
<strong>COMP(2041|9044) 19T2: Software Construction</strong>
is brought to you by <br>
the <a href="https://www.cse.unsw.edu.au/">School of Computer Science and Engineering</a>
at the <a href="https://www.unsw.edu.au/">University of New South Wales</a>, Sydney.<br>
For all enquiries, please email the class account at
<a href="mailto:@cse.unsw.edu.au">cs2041@cse.unsw.edu.au</a><br>
<small>CRICOS Provider 00098G</small>
</p>
</footer>

</body></html>